+++
date = "2017-03-13T09:44:30+09:00"
draft = false
title = "Netlify で netlify.com ページと独自ドメインのページが重複してしまうとき"

+++

先日 Netlify のもくもく会に参加させていただきました。  
Netlify で SITE を作ると `https://hoge.netlify.com/` と自動的にできる URL があるのですが、独自ドメインを取得する場合、この自動的にできる URL の方も残ってしまい 1 つのサイトに 2 つの URL があることになります。

<!--more-->

<img src="/images/170313/img-1.png" class="image fit">

Domain をクリックして開いてみると自分で取得した独自ドメインのページにリンクするのですが、  
Name の方は Netlify で自動的に URL がつけられていました。

自動的にできる URL の方を独自ドメインにリダイレクトできればよいのですが、その方法でやる場合配下のページをすべてリダイレクトするというワイルドカード（ * ）が使えず、
投稿記事などの下位ページを 1 つ 1 つ手作業でリダイレクトしないといけなくなるようです。

記事を書くたびに手作業でリダイレクトさせるのは少し手間ですので、もくもく会ではこの場合 `canonical` タグを使いましょうということを教えていただきました。

1 つの ページに複数 URL があると Google さんからは別々のページが存在するのだと判断されてしまい、ページへの評価が正しいものではなくなってしまう可能性があるので、SEO の点からするとあまりよいとは言えません。

（URL が複数あることで評価が悪くなるということではなく、別々のページと認識されることで本来の評価が複数に分散されてしまうようです。）

`canonical` タグを入れることで、1 つのページに複数 URL があってもどれが正規の URL なのかを宣言して Google さんに伝えることができます。

```html
<link rel="canonical" href="{{ .Permalink }}">
```

`<head></head>` に入れましょう。  
href の値は上のように、ページごとのパーマリンクを取得して都度変わるようにしましょう。  
URL で指定してしまうと、どのページでも指定したページのコンテンツだけを伝えることになってしまいます。
